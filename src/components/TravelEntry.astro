---
import {dateFormatter, getPreviewAlt} from "@utils/general";
import { Icon } from "astro-icon/components";
import JourneyIcon from "@components/TypeIcon.astro";
import {journeyTypes} from "../utils/types";
import { Image } from 'astro:assets';
import {type CollectionEntry} from "astro:content";

interface Props {
    journey: CollectionEntry<"posts">,
}

const { journey } = Astro.props;
const previewAlt = getPreviewAlt(journey);
---

<li>
    <a href={Astro.url + journey.slug} class="flex items-center gap-4 group
    backdrop-filter backdrop-blur-md transition-colors duration-300
    bg-orange-100 bg-opacity-50 dark:bg-stone-700 dark:bg-opacity-50 border-2 
    border-orange-200 dark:border-transparent focus:border-red-700 focus:outline-none
    hover:bg-orange-50 hover:text-orange-950 dark:hover:bg-stone-700 dark:hover:text-orange-200
    active:bg-red-700 active:text-orange-50
    visited:text-stone-500 dark:visited:text-stone-300
    rounded-2xl px-4 py-3 
    decoration-none select-none">
        <Image src={journey.data.image} alt={previewAlt} width={64} height={64} class="rounded-xl object-cover w-16 h-16 sepia group-hover:sepia-0 transition-all" loading="eager"/>
        <div>
            <h2 class="font-bold text-xl inline-flex mr-2 items-baseline">
                {journey.data.title} <Icon name="mdi:chevron-right" />
            </h2>
            <div class="flex gap-2">
                <JourneyIcon type={journeyTypes[journey.data.type]} />
                <div>Â·</div>
                {dateFormatter(journey.data.date)}
            </div>
        </div>
    </a>
</li>
